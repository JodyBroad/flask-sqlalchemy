{% extends "layout.html" %}

{% block body_content %}

<div class="container-shop">
  <img class="bg obj-fit-cover" src="{{url_for('static',filename='images/header_shop_1.png')}}" alt="spiky succulent">
  <h1>Shop</h1>
</div>


<h1 xmlns="http://www.w3.org/1999/html">Shop</h1>


{% if session['logged_in_username'] %}
<hr>
    <h1>Welcome {{ session['logged_in_username'] }}!</h1>
    <h2> Are you logged in? That is {{ session['logged_in'] }}</h2>
    <h3>What type of log in is it? You are logged in as {{ session['typesession'] }}</h3>
<!-- not currently able to get the person ID extracted into a number -->
    <h4>Your Person ID is {{ session['id_number'] }}</h4>
<br>
<hr>
{% else %}
<hr>
    <h1>You are not currently logged in </h1>
    <h2>Please <a href='/log_in'>Login</a> to make a purchase</h2>

<br>
<hr>
{% endif %}

<!-- Indoor/Outdoor dropdown -->
<div class="btn-group">
  <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
    Environment
  </button>
  <div class="dropdown-menu">
    <a class="dropdown-item" href="/indoor_plants">Indoor</a>
    <a class="dropdown-item" href="/outdoor_plants">Outdoor</a>
  </div>
</div>

<!-- Size dropdown -->
<div class="btn-group">
  <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
    Size
  </button>
  <div class="dropdown-menu">
    <a class="dropdown-item" href="/tiny_plants">Tiny</a>
    <a class="dropdown-item" href="/small_plants">Small</a>
    <a class="dropdown-item" href="/medium_plants">Medium</a>
    <a class="dropdown-item" href="/tall_plants">Tall</a>
  </div>
</div>

<!-- Plant Type dropdown -->
<div class="btn-group">
  <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
    Plant Type
  </button>
  <div class="dropdown-menu">
    <a class="dropdown-item" href="/cacti_succulent_plants">Cacti/Succulent</a>
    <a class="dropdown-item" href="/hanging_plants">Hanging</a>
    <a class="dropdown-item" href="/flowering_plants">Flowering</a>
    <a class="dropdown-item" href="/palm_plants">Palm</a>
    <a class="dropdown-item" href="/fern_plants">Fern</a>
  </div>
</div>


<!-- Price dropdown -->
<div class="btn-group">
  <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
    Price
  </button>
  <div class="dropdown-menu">
    <a class="dropdown-item" href="/value_savers">Value Savers</a>
    <a class="dropdown-item" href="/modest_picks">Modest Picks</a>
    <a class="dropdown-item" href="/fancy_picks">Fancy Picks</a>
    <a class="dropdown-item" href="/premium_range">Premium Range</a>
  </div>
</div>



<!--display all plants-->
{% if plant_shop_plant %}
{% for product, category, plant_type, size in plant_shop_plant %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}


<!--display outdoor plants-->
{% if display_outdoor_plants %}
{% for product, category, plant_type, size in display_outdoor_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}


<!--display indoor plants-->
{% if display_indoor_plants %}
{% for product, category, plant_type, size in display_indoor_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}


<!--display tiny plants-->
{% if display_tiny_plants %}
{% for product, category, plant_type, size in display_tiny_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display small plants-->
{% if display_small_plants %}
{% for product, category, plant_type, size in display_small_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}


<!--display medium plants-->
{% if display_medium_plants %}
{% for product, category, plant_type, size in display_medium_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display tall plants-->
{% if display_tall_plants %}
{% for product, category, plant_type, size in display_tall_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display cactus and succulent plants-->
{% if display_cacti_succulent_plants %}
{% for product, category, plant_type, size in display_cacti_succulent_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display hanging plants-->
{% if display_hanging_plants %}
{% for product, category, plant_type, size in display_hanging_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display flowering plants-->
{% if display_flowering_plants %}
{% for product, category, plant_type, size in display_flowering_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display palm plants-->
{% if display_palm_plants %}
{% for product, category, plant_type, size in display_palm_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display fern plants-->
{% if display_fern_plants %}
{% for product, category, plant_type, size in display_fern_plants %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}


<!--display value saver plants-->
{% if display_value_saver %}
{% for product, category, plant_type, size in display_value_saver %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display modest picks-->
{% if display_modest_picks %}
{% for product, category, plant_type, size in display_modest_picks %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--display fancy picks-->
{% if display_fancy_picks %}
{% for product, category, plant_type, size in display_fancy_picks %}
   <a href="/plant{{ product.id }}">{{product.species}} {{category.category_description}}
       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>
{% endfor %}
{% endif %}

<!--&lt;!&ndash;display premium picks&ndash;&gt;-->
<!--{% if display_premium_range %}-->
<!--{% for product, category, plant_type, size in display_premium_range %}-->
<!--   <a href="/plant/{{ product.id }}">{{product.species}} {{category.category_description}}-->
<!--       {{plant_type.plant_type_description}} {{size.size_description}} {{product.price}}</a>-->
<!--{% endfor %}-->
<!--{% endif %}-->

<!--table formatting-->
<div class="container-fluid bg-1 text-center">
<!--if cart is not empty basically-->
{% if display_premium_range %}
    <div class="table-responsive table-striped">
        <table class="table">
            <thead>
                <tr>
                {% for header in headings %}
                    <th scope="col">{{ header }}</th>
                {% endfor %}
                 </tr>
            </thead>
            <tbody>
                <tr>
                {% for product, category, plant_type, size in display_premium_range %}
                    <td hidden> Plant id: {{ product.id }} </td>
                    {% if product.id == 1 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/boston_fern_single.jpg') }}" alt="Boston Fern Image 1" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 2 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/aloe_vera.jpg') }}" alt="Aloe Vera" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 3 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/parlour_palm.jpg') }}" alt="Parlour Palm" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 4 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/anthurium_pot.jpg') }}" alt="Anthurium in a pot" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 5 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/swiss_cheese_close.jpg') }}" alt="Swiss Cheese Plant" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 6 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/sweet_orange_tree_1.jpg') }}" alt="Sweet Orange Tree" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 7 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/climbing_rose_1.jpg') }}" alt="Climbing Rose" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 8 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/fatsia_japonica_leaf.jpg') }}" alt="Fatsia Japonica Leaf" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 9 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/hydrangea_white.jpg') }}" alt="White Hydrangea" width="150" height="200"></a></td>
                    {% endif %}
                    {% if product.id == 10 %}
                    <td><a href="plant/{{product.id}}"><img class="img-fluid img-thumbnail" src="{{ url_for('static', filename='images/alstromeria_yellow.jpg') }}" alt="Yellow Alstromeria" width="150" height="200"></a></td>
                    {% endif %}

                    <th scope="row"><a href="plant/{{product.id}}">{{ product.plant_nickname }}</a></th>

                      <td>{{ product.species}}</td>
                      <td>£{{ product.price }}</td>
                      <td>{{ product.quantity }}</td>
                      <td>£{{ (product.sub_total) }}</td>
                </tr>
                 {% endfor %}
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>Total price: </td>
                    <td> £{{ cart_contents|sum('sub_total')}}</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>
{% endif %}
{% endblock %}

